{
  "version": "0.2.0",
  "configurations": [
    {
      // This works with terraform config 2-01_try-now
      "type": "java",
      "name": "Debug Operator (try-now)",
      "request": "launch",
      "cwd": "${workspaceFolder}/java/operator/org.eclipse.theia.cloud.defaultoperator",
      "mainClass": "org.eclipse.theia.cloud.defaultoperator.DefaultTheiaCloudOperatorLauncher",
      "args": [
        "--keycloak",
        "--keycloakURL",
        "https://${input:minikubeIP}.nip.io/keycloak/",
        "--keycloakRealm",
        "TheiaCloud",
        "--keycloakClientId",
        "theia-cloud",
        "--instancesHost",
        "ws.${input:minikubeIP}.nip.io",
        "--serviceUrl",
        "https://service.${input:minikubeIP}.nip.io",
        "--cloudProvider",
        "MINIKUBE",
        "--sessionsPerUser",
        "3",
        "--appId",
        "asdfghjkl",
        "--storageClassName",
        "default",
        "--requestedStorage",
        "250Mi",
        "--bandwidthLimiter",
        "WONDERSHAPER",
        "--oAuth2ProxyVersion",
        "v7.5.1"
      ],
      "vmArgs": "-Dlog4j2.configurationFile=log4j2.xml",
      "preLaunchTask": "Build and Install Operator library"
    },
    {
      // This works with terraform config 2-02_monitor with authentication
      "type": "java",
      "name": "Debug Operator (monitor-auth)",
      "request": "launch",
      "cwd": "${workspaceFolder}/java/operator/org.eclipse.theia.cloud.defaultoperator",
      "mainClass": "org.eclipse.theia.cloud.defaultoperator.DefaultTheiaCloudOperatorLauncher",
      "args": [
        "--enableMonitor",
        "--enableActivityTracker",
        "--keycloak",
        "--keycloakURL",
        "https://${input:minikubeIP}.nip.io/keycloak/",
        "--keycloakRealm",
        "TheiaCloud",
        "--keycloakClientId",
        "theia-cloud",
        "--instancesHost",
        "ws.${input:minikubeIP}.nip.io",
        "--serviceUrl",
        "https://service.${input:minikubeIP}.nip.io",
        "--cloudProvider",
        "MINIKUBE",
        "--sessionsPerUser",
        "3",
        "--appId",
        "asdfghjkl",
        "--storageClassName",
        "default",
        "--requestedStorage",
        "250Mi",
        "--bandwidthLimiter",
        "WONDERSHAPER",
        "--oAuth2ProxyVersion",
        "v7.5.1"
      ],
      "vmArgs": "-Dlog4j2.configurationFile=log4j2.xml",
      "preLaunchTask": "Build and Install Operator library"
    },
    {
      // This works with terraform config 2-02_monitor with no authentication
      "type": "java",
      "name": "Debug Operator (monitor-no-auth)",
      "request": "launch",
      "cwd": "${workspaceFolder}/java/operator/org.eclipse.theia.cloud.defaultoperator",
      "mainClass": "org.eclipse.theia.cloud.defaultoperator.DefaultTheiaCloudOperatorLauncher",
      "args": [
        "--enableMonitor",
        "--enableActivityTracker",
        "--instancesHost",
        "ws.${input:minikubeIP}.nip.io",
        "--serviceUrl",
        "https://service.${input:minikubeIP}.nip.io",
        "--cloudProvider",
        "MINIKUBE",
        "--sessionsPerUser",
        "3",
        "--appId",
        "asdfghjkl",
        "--storageClassName",
        "default",
        "--requestedStorage",
        "250Mi",
        "--bandwidthLimiter",
        "WONDERSHAPER",
        "--oAuth2ProxyVersion",
        "v7.5.1"
      ],
      "vmArgs": "-Dlog4j2.configurationFile=log4j2.xml",
      "preLaunchTask": "Build and Install Operator library"
    },
    {
      // This works with terraform config 2-03_try-now_paths
      "type": "java",
      "name": "Debug Operator (try-now-paths)",
      "request": "launch",
      "cwd": "${workspaceFolder}/java/operator/org.eclipse.theia.cloud.defaultoperator",
      "mainClass": "org.eclipse.theia.cloud.defaultoperator.DefaultTheiaCloudOperatorLauncher",
      "args": [
        "--keycloak",
        "--keycloakURL",
        "https://${input:minikubeIP}.nip.io/keycloak/",
        "--keycloakRealm",
        "TheiaCloud",
        "--keycloakClientId",
        "theia-cloud",
        "--usePaths",
        "--instancesPath",
        "instances",
        "--instancesHost",
        "${input:minikubeIP}.nip.io",
        "--serviceUrl",
        "https://${input:minikubeIP}.nip.io/service",
        "--cloudProvider",
        "MINIKUBE",
        "--sessionsPerUser",
        "3",
        "--appId",
        "asdfghjkl",
        "--storageClassName",
        "default",
        "--requestedStorage",
        "250Mi",
        "--bandwidthLimiter",
        "WONDERSHAPER",
        "--oAuth2ProxyVersion",
        "v7.5.1"
      ],
      "vmArgs": "-Dlog4j2.configurationFile=log4j2.xml",
      "preLaunchTask": "Build and Install Operator library"
    },
    {
      // This works with terraform config 2-04_try-now_paths_eager_start
      "type": "java",
      "name": "Debug Operator (eager start try-now-paths)",
      "request": "launch",
      "cwd": "${workspaceFolder}/java/operator/org.eclipse.theia.cloud.defaultoperator",
      "mainClass": "org.eclipse.theia.cloud.defaultoperator.DefaultTheiaCloudOperatorLauncher",
      "args": [
        "--keycloak",
        "--keycloakURL",
        "https://${input:minikubeIP}.nip.io/keycloak/",
        "--keycloakRealm",
        "TheiaCloud",
        "--keycloakClientId",
        "theia-cloud",
        "--usePaths",
        "--instancesPath",
        "instances",
        "--instancesHost",
        "${input:minikubeIP}.nip.io",
        "--serviceUrl",
        "https://${input:minikubeIP}.nip.io/service",
        "--cloudProvider",
        "MINIKUBE",
        "--sessionsPerUser",
        "3",
        "--appId",
        "asdfghjkl",
        "--storageClassName",
        "default",
        "--requestedStorage",
        "250Mi",
        "--bandwidthLimiter",
        "WONDERSHAPER",
        "--oAuth2ProxyVersion",
        "v7.5.1",
        "--eagerStart"
      ],
      "vmArgs": "-Dlog4j2.configurationFile=log4j2.xml",
      "preLaunchTask": "Build and Install Operator library"
    },
    {
      // Attach to the service running (Task: Run Service)
      "type": "java",
      "name": "Attach to Service",
      "request": "attach",
      "hostName": "localhost",
      "port": 5005
    },
    {
      "type": "node",
      "request": "launch",
      "name": "Debug Theia Example Browser Backend",
      "program": "${workspaceRoot}/theia/examples/browser-app/src-gen/backend/main.js",
      "args": ["--loglevel=debug", "--port=3000", "--no-cluster"],
      "env": {
        "NODE_ENV": "development"
      },
      "sourceMaps": true,
      "outFiles": [
        "${workspaceRoot}/theia/node_modules/@theia/*/lib/**/*.js",
        "${workspaceRoot}/theia/*/lib/**/*.js",
        "${workspaceRoot}/theia/examples/browser-app/src-gen/**/*.js"
      ],
      "smartStep": true,
      "internalConsoleOptions": "openOnSessionStart",
      "outputCapture": "std"
    }
  ],
  "inputs": [
    {
      "type": "promptString",
      "id": "minikubeIP",
      "description": "Provide your minikube ip address (execute 'minikube ip').",
      "default": "192.168.59.101"
    }
  ]
}
